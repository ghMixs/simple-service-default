#!groovy
properties([disableConcurrentBuilds()])

pipeline {
    agent any
    
	environment {
        PROJECT_NAME = "${GIT_URL.tokenize('/.')[-2]}"
        BRANCH = "${GIT_BRANCH.split('/')[1]}"
    }
	
    stages {
        stage('Create temporary docker'){
            steps {
                script {
						def inspectExitCode = sh script: "docker build . -t tmp_${BRANCH} -f build/Dockerfile", returnStatus: true
						if (inspectExitCode == 0)
						{
							echo "Create temporary docker succes..."   
						}
						else {
							error "Create temporary docker failed..."
						}
                       
                    }
                }         
        }
    }
}
